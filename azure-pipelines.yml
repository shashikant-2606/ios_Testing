trigger:
  - main

pool:
  vmImage: 'macOS-latest'

stages:
  - stage: emulator
    jobs:
      - job: test
        steps:
          - task: NodeTool@0
            inputs:
              versionSource: 'spec'
              versionSpec: '18.17.1'

          - task: JavaToolInstaller@0
            inputs:
              versionSpec: '11'
              jdkArchitectureOption: 'x64'
              jdkSourceOption: 'PreInstalled'


          - script: |
              
              npm install -g appium
              appium --version
              appium driver install xcuitest
              appium plugin install --source npm appium-device-farm
              appium --address 0.0.0.0 --port 4723 --log-level debug --use-plugins appium-xcuitest-driver &
              xcode-select -s /Applications/Xcode12.2.app/Contents/Developer
              /usr/bin/xcodebuild -version
              
  
